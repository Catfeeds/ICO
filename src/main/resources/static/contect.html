<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>我的信息-ICO.TT</title>
    <link href="assets/images/favicon.ico" rel="bookmark" type="image/x-icon">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/theme-admin-extension.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
    <link rel="stylesheet" href="assets/css/theme_cn.css">
    <link href="assets/css/sweet-alert.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/theme-elements_0529.css">
    <link rel="stylesheet" href="assets/css/theme-blog.css">
    <link rel="stylesheet" href="assets/css/theme-shop.css">
    <link rel="stylesheet" href="assets/css/theme-animate.css">
    <link rel="stylesheet" href="assets/css/theme-admin-extension.css">
    <link rel="stylesheet" href="assets/css/extension.css">
    <link rel="stylesheet" href="assets/css/settings.css" media="screen">
    <link rel="stylesheet" href="assets/css/layers.css" media="screen">
    <link rel="stylesheet" href="assets/css/navigation.css" media="screen">
    <link rel="stylesheet" href="assets/css/component.css" media="screen">
    <link rel="stylesheet" href="assets/css/skin-corporate-hosting.css">
    <link rel="stylesheet" href="assets/css/custom.css">

    <!-- Css (necessary Css) -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap-theme.css" rel="stylesheet">
    <link href="assets/css/language-selector-remove-able-css.css" rel="stylesheet">
    <link href="assets/css/flexslider.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/plugin.css" rel="stylesheet">
    <link href="assets/css/menu.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">
    <link href="assets/css/color.css" rel="stylesheet">
    <link href="assets/css/iconmoon.css" rel="stylesheet">
    <link href="assets/css/themetypo.css" rel="stylesheet">
    <link href="assets/css/widget.css" rel="stylesheet">
    <link href="assets/css/theme-elements_0529.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">

    <!-- Header -->
    <header id="main-header">
        <div class="container">
            <div class="main-head">
                <div class="left-side">
                    <div class="logo"><a href="index.html"><img src="assets/images/logo.png" alt=""></a></div>
                    <nav class="navigation" style="font-family: 微软雅黑;">
                        <ul>
                            <li><a href="index.html" class="dropdown active">首页</a></li>
                            <li><a href="listing-grid.html">ICO中</a></li>
                            <li><a href="under.html">即将ICO</a></li>
                            <li><a href="listing.html">已结束ICO</a></li>
                            <li><a href="blogmedium.html">新闻媒体</a></li>
                            <li><a href="sign.html">登录/注册</a></li>
                            <li><a href="#">关于</a><i class="icon-arrow-down8"></i>
                                <ul class="sub-dropdown">
                                    <li><a href="about.html">关于我们</a></li>
                                    <li><a href="services.html">服务与帮助</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>

                </div>
                <div class="right-side">
                    <div class="profile-view">
                        <ul id="personInfo" style="display:none">
                            <li>
                                <img alt="#" src="assets/extra-images/user-img.jpg">
                                <i class="icon-arrow-down8"></i>
                                <div class="dropdown-area">
                                    <h5 id="userName"></h5>
                                    <ul class="dropdown">
                                        <li><a href="contect.html" id="contect"><i class="icon-file-text-o"></i>我的信息</a></li>
                                    </ul>
                                    <a class="sign-btn" id="sign_out"><i class="icon-logout"></i>退出登录</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="mob-nav"></div>
            </div>
        </div>
    </header>
    <!-- Header -->
    <div class="breadcrumb-sec"
         style="background:url(assets/extra-images/banner.jpg) no-repeat; background-size:100% auto; min-height:157px!important;">
        <div class="absolute-sec">
            <div class="container">
                <div class="cs-table">
                    <div class="cs-tablerow">
                        <div class="pageinfo page-title-align-left">
                            <h1 style="color:#fff !important; text-transform:none;">我的信息</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Content -->
    <main id="main-content">
        <div class="main-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <aside class="sidebar">
                            <h4 class="heading-primary"> 管理菜单</h4>
                            <ul class="nav nav-list mb-xlg">
                                <li>
                                    <a href="contect.html"> 我的信息</a>
                                </li>
                                <li>
                                    <a href="tokenrecharge.html"> 数字代币充值</a>
                                </li>
                                <li>
                                    <a href="tokeninvestment.html"> 数字代币投资</a>
                                </li>
                                <li>
                                    <a href="rechargerecord.html"> 投资记录</a>
                                </li>
                                <li>
                                    <a href="tokenwithdrawal.html"> 数字代币提现</a>
                                </li>
                                <li>
                                    <a href="addressmanage.html"> 提现地址管理</a>
                                </li>
                                <li class="active">
                                    <a href="securitycenter.html"> 安全中心</a>
                                    <ul>
                                        <li>
                                            <a href="securitycenter.html"> 安全中心设置</a>
                                        </li>
                                        <li>
                                            <a href="revise.html"> 修改登录密码</a>
                                        </li>
                                        <li>
                                            <a href="addphone.html"> 修改手机号码</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a id="signOut" style="cursor:pointer"> 退出登录</a>
                                </li>
                            </ul>
                        </aside>
                    </div>
                    <div class="col-md-9">
                        <h2><strong>我的信息</strong></h2>
                        <div class="row">
                            <header class="panel-heading">
                                <h2 class="panel-title"> 我的身份信息</h2>
                            </header>
                            <div class="panel-body">
                                <form class="form-horizontal form-bordered">
                                    <div class="form-group">
                                        <label class="col-md-3 control-label"> 真实姓名</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <label class="control-label" id="trueNamelable" style="display: none"></label>
                                                <input type="text" id="truename" class="form-control"
                                                       placeholder="" required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label"> 身份证号码</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <label class="control-label" id="identityCardlable" style="display: none"></label>
                                                <input type="text" id="identitycard" class="form-control"
                                                       placeholder=""  onblur="id_card()" required  >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label"></label>
                                        <div class="col-md-6 col-xs-11">
                                            <button id="submitRealInfo" class="btn cs-bgcolor" style="color:#ffffff; font-weight: bold"
                                                    type="button">递交信息，递交后将不能修改
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="row">
                            <header class="panel-heading">
                                <h2 class="panel-title"> 已投资信息</h2>
                            </header>
                            <div class="panel-body">
                                <table class="table table-striped">
                                    <tbody>
                                    </tbody>
                                </table>
                                <form class="form-horizontal form-bordered" method="post">
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" style="text-align:right;">BTC合计</label>
                                        <label class="col-md-2 control-label"
                                               style="text-align:left;font-size:26px;color:#FF8000;">0.00000</label>
                                        <label class="col-md-2 control-label" style="text-align:right;">ETH合计</label>
                                        <label class="col-md-2 control-label"
                                               style="text-align:left;font-size:26px;color:#FF8000;">0.00000</label>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <header class="panel-heading">
                                <h2 class="panel-title"> 我的联系信息</h2>
                            </header>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label class="col-md-3 control-label"> 手机 </label>
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="button" class="cs-bgcolor btn" id="phone_a"
                                                   data-toggle="modal" style="color: #ffffff; font-weight: bold;"
                                                   data-target="#formModal" value="添加手机号"/>
                                            <label class="control-label" id="phonelable" style="display: none">
                                            </label>
                                        </div>



                                        <div class="modal fade" id="formModal" tabindex="-1" role="dialog"
                                             aria-labelledby="formModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal"
                                                                aria-hidden="true"></button>
                                                        <h4 class="modal-title" id="formModalLabel">添加手机</h4>
                                                    </div>
                                                    <form id="demo-form" class="form-horizontal mb-lg">
                                                        <div class="modal-body">
                                                            <div class="form-group mt-lg">
                                                                <label class="col-sm-2 control-label">手机号码</label>
                                                                <div class="col-sm-10">
                                                                    <input type="text" id="mobile" onblur="aaa()"
                                                                           class="form-control" placeholder="请输入您的手机号码"/>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="col-sm-2 control-label">验证码</label>
                                                                <div class="col-sm-3">
                                                                    <input type="text" id="verifycode"
                                                                           class="form-control" style="width:140px;"
                                                                           maxlength="6"/>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input type="button" id="sendsms"
                                                                           class="cs-bgcolor btn"
                                                                           style="color: #ffffff; font-weight: bold;"
                                                                           value="发送手机验证码"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <input type="button" class="cs-bgcolor btn" style="color: #ffffff; font-weight: bold;" value="取消" id="cancle"/>
                                                            <input type="button" class="cs-bgcolor btn" style="color: #ffffff; font-weight: bold;" value="确定" id="commit"/>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>




                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <header class="panel-heading">
                                <h2 class="panel-title"> 我的提示</h2>
                            </header>
                            <div class="panel-body">
                            </div>
                            <div class="col-md-12">
                                <div class="toggle toggle-primary toggle-simple" data-plugin-toggle>
                                    <section class="toggle active">
                                        <p>您好，你可以在平台多进行了解。在关于我们那一栏您可以更好的了解我们平台。感谢您对ICO.TT的支持!</p>
                                    </section>
                                </div>
                            </div>
                        </div>
                        <hr class="tall">
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<!--// Main Content //-->

<!--// Footer Widget //-->
<footer id="footer-sec">
    <div class="container">
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">关于我们</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>ICO.TT是一个专业为ICO项目提供完整服务解决方案的平台，能够帮助投资者更好的了解进行ICO的区块链项目，并且帮助投资者更好的管理自己的投资资金和投资项目。
                    <br>ICO.TT所提供的各项服务的所有权和运营权均归ICO.TT网站所有。ICO.TT用户通过访问或使用本网站，即表示接受并同意网站协议的所有条件和条款。</p>
            </div>
        </aside>
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">法律说明</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>ICO.TT的所有运营行为将会尊重客户所在地相关法律和法规，本网站法律声明未涉及的问题参见当地国家有关法律法规，当本声明与当地国家法律法规冲突时，以当地国家法律法规为准。
                    因用户使用本网站而引起或与之相关的一切争议、权利主张或其它事项，均受当地法律法规区域的管辖。
                </p>
            </div>
        </aside>
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">联系我们</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>您的信任是对我们最大的肯定，我们随时为您提供相关服务，敬请关注一下QQ号、微信号或者Email给我们。
                    <br>客服微信号: ICO.TT
                    <br>客服QQ: 2318798407
                    <br>官方QQ群: 389428765
                    <br>Email:2318798407@qq.com
                </p>
            </div>
        </aside>
    </div>
</footer>

<!--// CopyRight //-->
<div id="copyright">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="footer_icon"><a href="#"><img src="assets/images/footer-logo.png" alt=""></a></div>
                <div class="fnav-area">
                    <br>
                    <p>© 0000</p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- jQuery (necessary JavaScript) -->
<script src="assets/scripts/jquery.js"></script>
<script src="assets/scripts/bootstrap.min.js"></script>
<script src="assets/scripts/modernizr.js"></script>
<script src="assets/scripts/menu.js"></script>
<script src="assets/scripts/counter.js"></script>
<script src="assets/scripts/app.js"></script>
<script src="assets/scripts/sweet-alert.js"></script>
<script src="assets/scripts/jquery.flexslider-min.js"></script>
<script src="assets/scripts/functions.js"></script>
<script type="text/javascript">
    jQuery(window).load(function () {
//        window.setTimeout(window.location.href = "sign.html",5000);
        if (app.getUserInfo().emailAccount == null) {
            location.href = "sign.html";
//            $("#personInfo").css('display', 'none');
        } else {
            $("#personInfo").css('display', 'block');
            $("#userName").text(app.getUserInfo().nickName);
            if(app.getUserInfo().validateUser){
                var name = app.getUserInfo().realName.substr(0,1)+"**";
                var idcard = app.getUserInfo().idCard.substr(0,4)+"****"+app.getUserInfo().idCard.substr(app.getUserInfo().idCard.length-4);
                $("#trueNamelable").text(name).css('display', 'block');
                $("#identityCardlable").text(idcard).css('display','block');
                $("#truename").css('display', 'none');
                $("#identitycard").css('display', 'none');
                $("#submitRealInfo").css('display', 'none');
            }
            if(app.getUserInfo().validatePhone){
                $("#phone_a").css('display', 'none');
                $("#phonelable").text(app.getUserInfo().phone);
                $("#phonelable").css('display', 'block');
            }
        }
        jQuery('.flexslider').flexslider({
            animation: "slide",
            prevText: "<em class='icon-arrow-left9'></em>",
            nextText: "<em class='icon-arrow-right9'></em>",
            start: function (slider) {
                jQuery('body').removeClass('loading');
            }
        });
        $('#submitRealInfo').click(function () {
            var cardNO = $('#identitycard').val();
            var realName = $("#truename").val();
            var isValidate = null;
            if(cardNO.length <= 0){
                app.myAlert(" ","身份证信息不可为空!","warning");
                return;
            }
            if(realName.length <= 0){
                app.myAlert("","姓名信息不可为空!","warning");
                return;
            }
            /*var json = {cardno:cardNO,name:realName};
            $.ajax({
                url: "http://idcard.market.alicloudapi.com/lianzhuo/idcard",
                type: 'GET',
                timeout: 10000,//超时时间设置为10秒；
                data: JSON.stringify(json),
                dataType: 'json',//服务器返回json格式数据
                contentType: "application/json; charset=utf-8",
                success: function (result) {
                    if (result.code == 200) {
                        isValidate = true;
                        app.myAlert("","身份证验证成功!","success");
                        return;
                    }
                    else {
                        app.myAlert(" ","身份证验证失败!","error");
                        return;
                    }
                },
                error: function (xhr, type, errerThrown) {
                    sweetAlert(" ","网络异常,请稍候再试!","error");
                }
            });*/
            if(isValidate == null){
                var json = {idCard:cardNO,realName:realName,id:app.getUserInfo().id,isValidateUser:true};
                $.ajax({
                    url: "/user",
                    type: 'PUT',
                    timeout: 10000,//超时时间设置为10秒；
                    data: JSON.stringify(json),
                    dataType: 'json',//服务器返回json格式数据
                    contentType: "application/json; charset=utf-8",
                    headers: app.createAuthorizationTokenHeader(),
                    success: function (result) {
                        if (result.code == 200) {
                            app.setUserInfo(result.data.userInfo);
                            app.setToken(result.data.token);
//                            app.myAlertWithoutFunction(" ",result.message,"success");
                            location.href = "contect.html";
                            $("#truename").css('display', 'none');
                            $("#identitycard").css('display', 'none');
                            $("#submitRealInfo").css('display', 'none');
                            $("#trueNamelable").css('display', 'block');
                            $("#identityCardlable").css('display', 'block');
                        }
                        else {
                            app.myAlertWithoutFunction(" ",result.message,"warning");
                            return;
                        }
                    },
                    error: function (xhr, type, errerThrown) {
                        app.myAlertWithoutFunction("","网络异常,请重新验证!","error");
                        return;
                    }
                });
            }
        });
        // 取消button绑定事件
        $("#cancle").click(function(){
            window.location.reload();
        });
        //给发送验证码按钮绑定监听事件
        $("#sendsms").click(function () {
            var phoneNum = $("#mobile").val();
            // 此处判断该用户信息中是否有同样的手机号
            if (app.getUserInfo().phone != null) {
                if (app.getUserInfo().phone == phoneNum) {
                    app.myAlertWithoutFunction(" ","此手机号码已经验证过!","warning");
                    return;
                }
            }
            var phoneJson = {"phone": phoneNum};
            // 此处调用发送手机验证码的接口获取手机验证码
            $.ajax({
                url: "/user/validatePhone",
                type: 'POST',
                timeout: 10000,//超时时间设置为10秒；
                data: JSON.stringify(phoneJson),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                headers: app.createAuthorizationTokenHeader(),
                success: function (result) {
                    if (result.code == 200) {
                        app.setUserInfo(result.data.userInfo);
                    }
                    else {
                        app.myAlert("",result.message,"warning");
                    }
                },
                error: function (xhr, type, errerThrown) {
                    app.myAlert(" ","网络异常,请稍候再试!","error");
                }
            });
        });
        //提交按钮触发事件
        $("#commit").click(function () {
            var phoneNum = $("#mobile").val();
            var verifycode = $("#verifycode").val();
            if (phoneNum.length != 11) {
                app.myAlertWithoutFunction(" ","请填写正确的手机号码!","warning");
                return;
            }
            if (verifycode.length <= 0) {
                app.myAlertWithoutFunction(" ","验证码不能为空!","warning");
                return;
            }
            if (verifycode != app.getUserInfo().verifyCode) {
                app.myAlertWithoutFunction("","验证码信息错误，请重新输入!","error");
                return;
            } else if (app.getUserInfo().expireDate < new Date()) {
                app.myAlertWithoutFunction("","验证码已过期，请重新发送！","warning");
                return;
            } else {
                var verifycodeJson = {"validatePhone": true};
                // 此处调用发送手机验证码的接口获取手机验证码
                $.ajax({
                    url: "/user/phoneValidated",
                    type: 'POST',
                    timeout: 10000,//超时时间设置为10秒；
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(verifycodeJson),
                    dataType: "json",
                    headers: app.createAuthorizationTokenHeader(),
                    success: function (result) {
                        if (result.code == 200) {
                            app.setUserInfo(result.data.userInfo);
                            app.setToken(result.data.token);
                            app.myAlert("","手机验证成功!","success");
                        }
                        else {
                            app.myAlertWithoutFunction("",result.message,"warning");
                            return;
                        }
                    },
                    error: function (xhr, type, errerThrown) {
                        app.myAlert("","网络异常,请稍候再试!","error");
                        return;
                    }
                });
            }
        });




        $("#sign_out").click(function () {
            $("#personInfo").css('display', 'none');
            app.setUserInfo({});
            location.href = "index.html";
        });
//        列表中退出登录的触发事件
        $("#signOut").click(function () {
            $("#personInfo").css('display', 'none');
            app.setUserInfo({});
            location.href = "index.html";
        });
    });

    function id_card() {
        var cardAccount=$("#identitycard").val();
        var iscardAccount=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;
        if(cardAccount.length <= 0)
        {
            app.myAlert("","身份证号码不为空！","warning");
            return;
        }
        else if (!iscardAccount.test(cardAccount))
        {
            app.myAlert("","请输入正确的身份证号码！","warning");
            return;
        }
    }

    function aaa() {
        var mobileAccount = $("#mobile").val();
        var ismobileAccount = /^((13[0-9])|(15[^4,\\D])|(18[0,0-9]))\\d{8}$/;
        if (mobileAccount.length <= 0) {
            app.myAlert("","号码不能为空!","warning");
            return;
        } else if (ismobileAccount.test(mobileAccount)) {
            app.myAlert("","请输入正确的号码!","warning");

            return;
        }
    }
</script>
</body>
</html>