<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>我的信息-ICO.TT</title>
    <link href="assets/images/favicon.ico" rel="bookmark" type="image/x-icon">
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/theme-admin-extension.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.min.css">
    <link rel="stylesheet" href="assets/css/theme_cn.css">
    <link rel="stylesheet" href="assets/css/theme-elements_0529.css">
    <link rel="stylesheet" href="assets/css/theme-blog.css">
    <link rel="stylesheet" href="assets/css/theme-shop.css">
    <link rel="stylesheet" href="assets/css/theme-animate.css">
    <link rel="stylesheet" href="assets/css/theme-admin-extension.css">
    <link rel="stylesheet" href="assets/css/extension.css">
    <link rel="stylesheet" href="assets/css/settings.css" media="screen">
    <link rel="stylesheet" href="assets/css/layers.css" media="screen">
    <link rel="stylesheet" href="assets/css/navigation.css" media="screen">
    <link rel="stylesheet" href="assets/css/component.css" media="screen">
    <link rel="stylesheet" href="assets/css/skin-corporate-hosting.css">
    <link rel="stylesheet" href="assets/css/custom.css">
    <link rel="stylesheet" href="assets/css/sweet-alert.css">
    <!-- Css (necessary Css) -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap-theme.css" rel="stylesheet">
    <link href="assets/css/language-selector-remove-able-css.css" rel="stylesheet">
    <link href="assets/css/flexslider.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="assets/css/plugin.css" rel="stylesheet">
    <link href="assets/css/menu.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet">
    <link href="assets/css/color.css" rel="stylesheet">
    <link href="assets/css/iconmoon.css" rel="stylesheet">
    <link href="assets/css/themetypo.css" rel="stylesheet">
    <link href="assets/css/widget.css" rel="stylesheet">
    <link href="assets/css/theme-elements_0529.css" rel="stylesheet">

    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
</head>
<body>
<div class="wrapper">

    <!-- Header -->
    <header id="main-header">
        <div class="container">
            <div class="main-head">
                <div class="left-side">
                    <div class="logo"><a href="index.html"><img src="assets/images/logo.png" alt=""></a></div>
                    <nav class="navigation" style="font-family: 微软雅黑;">
                        <ul>
                            <li><a href="index.html" class="dropdown active">首页</a></li>
                            <li><a href="listing-grid.html">ICO中</a></li>
                            <li><a href="under.html">即将ICO</a></li>
                            <li><a href="listing.html">已结束ICO</a></li>
                            <li><a href="blogmedium.html">新闻媒体</a></li>
                            <li id="li_login"><a href="sign.html">登录/注册</a></li>
                            <li><a>关于</a><i class="icon-arrow-down8"></i>
                                <ul class="sub-dropdown">
                                    <li><a href="about.html">关于我们</a></li>
                                    <li><a href="services.html">服务与帮助</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>

                </div>
                <div class="right-side" style="margin-right:20%">
                    <div class="profile-view">
                        <ul id="personInfo" style="display:none">
                            <li>
                                <a href="contect.html"><img src="assets/extra-images/user-img.jpg"></a>
                                <i class="icon-arrow-down8"></i>
                                <div class="dropdown-area">
                                    <h5 id="userName"></h5>
                                    <ul class="dropdown">
                                        <li><a href="contect.html" id="contect"><i class="icon-file-text-o"></i>我的信息</a></li>
                                    </ul>
                                    <a class="sign-btn" id="sign_out"><i class="icon-logout"></i>退出登录</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="mob-nav"></div>
            </div>
        </div>
    </header>
    <!-- Header -->
    <div class="breadcrumb-sec"
         style="background:url(assets/extra-images/banner.jpg) no-repeat; background-size:100% auto; min-height:157px!important;">
        <div class="absolute-sec">
            <div class="container">
                <div class="cs-table">
                    <div class="cs-tablerow">
                        <div class="pageinfo page-title-align-left">
                            <h1 style="color:#fff !important; text-transform:none;">我的信息</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Main Content -->
    <main id="main-content">
        <div class="main-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <aside class="sidebar">
                            <h4 class="heading-primary"> 管理菜单</h4>
                            <ul class="nav nav-list mb-xlg">
                                <li>
                                    <a href="contect.html"> 我的信息</a>
                                </li>
                                <li>
                                    <a href="tokenrecharge.html"> 数字代币充值</a>
                                </li>
                                <li>
                                    <a href="tokeninvestment.html"> 数字代币投资</a>
                                </li>
                                <li>
                                    <a href="rechargerecord.html"> 投资记录</a>
                                </li>
                                <li>
                                    <a href="tokenwithdrawal.html"> 数字代币提现</a>
                                </li>
                                <li>
                                    <a href="addressmanage.html"> 提现地址管理</a>
                                </li>
                                <!--<li>-->
                                    <!--<a href="rmbpush.html"> 人民币提现</a>-->
                                <!--</li>-->
                                <li class="active">
                                    <a href="securitycenter.html"> 安全中心</a>
                                    <ul>
                                        <li>
                                            <a href="securitycenter.html"> 安全中心设置</a>
                                        </li>
                                        <li>
                                            <a href="revise.html"> 修改登录密码</a>
                                        </li>
                                        <!--<li>-->
                                            <!--<a href="index.html"> 修改交易密码</a>-->
                                        <!--</li>-->
                                        <li>
                                            <a href="addphone.html"> 修改手机号码</a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a id="signOut" style="cursor:pointer"> 退出登录</a>
                                </li>
                            </ul>
                        </aside>
                    </div>
                    <div class="col-md-9">
                        <h2><strong>修改登录密码</strong></h2>
                        <div class="row">
                            <header class="panel-heading">
                                <h2 class="panel-title">修改您的密码</h2>
                            </header>
                            <div class="panel-body">
                                <form class="form-horizontal form-bordered" action="?p=editPWD&do=EditPWD"
                                      method="post">
                                    <div class="form-group">
                                        <label class="col-md-3 control-label">原密码</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input type="password" id="oldPassword" class="form-control"
                                                       placeholder="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label">新密码</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input type="password" data-minlength="8" class="form-control" id="newPassword" placeholder="" required onkeyup="value=value.replace(/[\W]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" minlength="8" maxlength="30">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label">确认新密码</label>
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input type="password" id="newPassword2" class="form-control"
                                                       placeholder="" onkeyup="value=value.replace(/[\W]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" minlength="8" maxlength="30">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group" style="margin-left: 80px;">
                                        <label class="col-sm-3 control-label">验证码</label>
                                        <div class="col-sm-3">
                                            <input type="text" id="verifycode" class="form-control"
                                                   style="width:140px;" onkeyup="value=value.replace(/[\W]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" maxlength="6"/>
                                        </div>
                                        <div class="col-sm-6">
                                            <input type="button" id="sendsms" class="cs-bgcolor btn" style="color: #ffffff; font-weight: bold;"
                                                   value="发送手机验证码"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label"></label>
                                        <button data-toggle="modal" data-target="#formModal" id="updatePassword"
                                                class="cs-bgcolor btn" style="color: #ffffff; font-weight: bold;" type="button">修改密码
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="row">
                            <RR>
                                <RR>
                                    <div class="alert alert-info fade in nomargin">
                                        <p>密码长度不可小于8位或大于30位</p>
                                        <p>密码必须包含至少一个大写字母，小写字母和数字</p>
                                    </div>
                                </RR>
                            </RR>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
<!--// Main Content //-->

<!--// Footer Widget //-->
<footer id="footer-sec">
    <div class="container">
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">关于我们</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>ICO.TT是一个专业为ICO项目提供完整服务解决方案的平台，能够帮助投资者更好的了解进行ICO的区块链项目，并且帮助投资者更好的管理自己的投资资金和投资项目。
                    <br>ICO.TT所提供的各项服务的所有权和运营权均归ICO.TT网站所有。ICO.TT用户通过访问或使用本网站，即表示接受并同意网站协议的所有条件和条款。</p>
            </div>
        </aside>
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">法律说明</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>ICO.TT的所有运营行为将会尊重客户所在地相关法律和法规，本网站法律声明未涉及的问题参见当地国家有关法律法规，当本声明与当地国家法律法规冲突时，以当地国家法律法规为准。
                    因用户使用本网站而引起或与之相关的一切争议、权利主张或其它事项，均受当地法律法规区域的管辖。
                </p>
            </div>
        </aside>
        <aside class="col-lg-4 col-md-4 col-sm-6 widget widget_categories">
            <div class="widget-section-title"><strong class="title">联系我们</strong></div>
            <div style="color: #999;font-weight: 400">
                <p>您的信任是对我们最大的肯定，我们随时为您提供相关服务，敬请关注一下QQ号、微信号或者Email给我们。
                    <br>客服微信号: ICO.TT
                    <br>客服QQ: 2318798407
                    <br>官方QQ群: 389428765
                    <br>Email:2318798407@qq.com
                </p>
            </div>
        </aside>
    </div>
</footer>
<!--// Footer Widget //-->

<!--// CopyRight //-->
<div id="copyright">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="footer_icon"><a href="#"><img src="assets/images/footer-logo.png" alt=""></a></div>
                <div class="fnav-area">
                    <br>
                    <p>© 0000</p>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<!-- jQuery (necessary JavaScript) -->
<script src="assets/scripts/jquery.js"></script>
<script src="assets/scripts/bootstrap.min.js"></script>
<script src="assets/scripts/modernizr.js"></script>
<script src="assets/scripts/menu.js"></script>
<script src="assets/scripts/counter.js"></script>
<script src="assets/scripts/app.js"></script>
<script src="assets/scripts/sweet-alert.js"></script>
<script src="assets/scripts/sweet-alert.min.js"></script>
<script src="assets/scripts/jquery.flexslider-min.js"></script>
<script type="text/javascript">
    jQuery(window).load(function () {
        if (app.getUserInfo().emailAccount == null) {
            location.href = "sign.html";
//            $("#personInfo").css('display', 'none');
        } else {
            $("#personInfo").css('display','block');
            $("#li_login").css("display","none");
            $("#userName").text(app.getUserInfo().nickName);
        }
    });
    // 首先先获取验证码
    $("#sendsms").click(function () {
        var oldPassword = $("#oldPassword").val();
        var newPassword = $("#newPassword").val();
        var newPassword2 = $("#newPassword2").val();
        if(oldPassword.length <= 0){
            app.myAlert("","旧密码不可为空!","warning");
            return;
        }
        if(newPassword.length <= 8 || newPassword2.length >30){
            app.myAlert("","密码长度不可小于8位或大于30位!","warning");
            return;
        }
        if(newPassword2.length < 8 || newPassword2.length >30){
            app.myAlert("","密码长度不可小于8位或大于30位!","warning");
            return;
        }
        var phoneJson = {"phone":app.getUserInfo().phone};
        // 此处调用发送手机验证码的接口获取手机验证码
        $.ajax({
            url: "/user/validatePhone",
            type: 'POST',
            timeout: 10000,//超时时间设置为10秒；
            data: JSON.stringify(phoneJson),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            headers: app.createAuthorizationTokenHeader(),
            success: function (result) {
                if (result.code == 200) {
                    app.setUserInfo(result.data.userInfo);
                    app.myAlert("",result.message,"warning");
                }
                else {
                    app.myAlert("",result.message,"warning");
                }
            },
            error: function (xhr, type, errerThrown) {
                app.myAlert("","网络异常,请稍候再试!","error");
            }
        });
    });

    $("#updatePassword").click(function () {
        // 获取表单中的值
        var oldPassword = $("#oldPassword").val();
        var newPassword = $("#newPassword").val();
        var newPassword2 = $("#newPassword2").val();
        var verifycode = $("#verifycode").val();
        if(oldPassword.length <= 0){
            app.myAlert("","旧密码不可为空!","warning");
            return;
        }
        if(newPassword.length <= 8 || newPassword2.length >30){
            app.myAlert("","密码长度不可小于8位或大于30位!","warning");
            return;
        }
        if(newPassword2.length < 8 || newPassword2.length >30){
            app.myAlert("","密码长度不可小于8位或大于30位!","warning");
            return;
        }
        if(newPassword != newPassword2){
            app.myAlert("","两次输入的新密码不一样!","warning");
            return;
        }
        if(verifycode.length <= 0){
            app.myAlert("","验证码信息不可为空","warning");
            return;
        }
        var date1 = app.getUserInfo().expireDate;
        var date2 = new Date();
        var d = date1 > date2;
       /* else if(app.getUserInfo().expireDate < new Date().toDateString()){
            sweetAlert("验证码已过期，请重新发送！");
            return;
        }*/
        if(verifycode != app.getUserInfo().verifyCode){
            app.myAlert("","验证码信息错误，请重新输入!","error");
            return;
        }else {
            var updatePassword = {oldPassword:oldPassword,newPassword:newPassword,verifycode:verifycode};
            $.ajax({
                url: "/user/updatePassword",
                type: 'PUT',
                timeout: 10000,//超时时间设置为10秒；
                data: JSON.stringify(updatePassword),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                headers: app.createAuthorizationTokenHeader(),
                success: function (result) {
                    if (result.code == 200) {
                        app.setUserInfo(result.data.userInfo);
                        app.myAlert("",result.message,"warning");
                        return;
                    }
                    else {
                        app.myAlert("",result.message,"warning");
                        return;
                    }
                },
                error: function (xhr, type, errerThrown) {
                    app.myAlert("","网络异常,请稍候再试!","error");
                    return;
                }
            });
        }
    });

    $("#sign_out").click(function () {
        $("#personInfo").css('display', 'none');
        app.setUserInfo({});
        location.href = "index.html";
    });
    $("#signOut").click(function () {
        $("#personInfo").css('display', 'none');
        app.setUserInfo({});
        location.href = "index.html";
    });
</script>
</body>
</html>